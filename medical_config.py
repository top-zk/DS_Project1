import torch
import os

# 设备配置
DEVICE = torch.device('cuda' if torch.cuda.is_available() else 'cpu')

# 模型参数
MAX_LEN = 128
BATCH_SIZE = 16
EPOCHS = 4
MODEL_PATH = r"bert-base-chinese"

# 数据文件路径
DATA_PATH = r"output/diseases.json"  # 改为已爬取的JSON数据文件
# 创建data文件夹路径
DATA_DIR = "data"
os.makedirs(DATA_DIR, exist_ok=True)
# 输出数据路径
TRAIN_DATA_PATH = "data/train_data.txt"
VAL_DATA_PATH = "data/val_data.txt"
ENCYCLOPEDIA_JSON_DIR = r"web_crapper/web_scraper/encyclopedia_data"
ENCYCLOPEDIA_DIR = "web_crapper/web_scraper/encyclopedia_data"
DISEASE_JSON_PATH = r"output/diseases.json"  # 确保指向正确的输出文件
DEMO_JSON_PATH = r"huank/DB_project/demo_output.json"
DISEASE_XML_PATH = "data/disease.xml"

# 疾病症状类型映射
DISEASE_SYMPTOM_TYPES = {
    0: '呼吸系统疾病',
    1: '心血管系统疾病',
    2: '消化系统疾病',
    3: '神经系统疾病',
    4: '肌肉骨骼疾病',
    5: '皮肤疾病',
    6: '泌尿系统疾病',
    7: '全身性疾病',
    8: '五官疾病',
    9: '精神心理疾病'
}

# 疾病症状关键词映射（用于规则辅助诊断）
DISEASE_SYMPTOM_KEYWORDS = {
    0: ['咳嗽', '咳痰', '呼吸困难', '气促', '喘息', '喉咙痛', '咽痛', '流涕', '鼻塞', '打喷嚏', '咯血', '胸痛', '肺', '支气管', '感冒', '发烧'],
    1: ['胸闷', '心悸', '心慌', '心跳', '胸痛', '心前区', '高血压', '心律', '脉搏', '紫绀', '水肿', '心脏'],
    2: ['腹痛', '腹泻', '拉肚子', '恶心', '呕吐', '胃痛', '胃胀', '消化不良', '反酸', '烧心', '便秘', '食欲', '黄疸', '腹胀', '胃疼', '肚子疼', '不消化', '吃不下', '胃'],
    3: ['头痛', '头疼', '头晕', '眩晕', '失眠', '睡不着', '昏迷', '意识', '抽搐', '麻木', '面瘫', '记忆力', '偏瘫', '手脚麻', '中风', '脑'],
    4: ['关节痛', '关节炎', '腰痛', '腰疼', '背痛', '骨折', '扭伤', '肌肉痛', '酸痛', '颈椎', '腰椎', '活动受限', '红肿', '腿疼', '胳膊疼'],
    5: ['皮疹', '瘙痒', '痒', '红斑', '痘', '湿疹', '脱皮', '溃疡', '疱疹', '斑块', '皮肤'],
    6: ['尿频', '尿急', '尿痛', '血尿', '排尿', '腰痛', '肾', '浮肿', '尿不尽'],
    7: ['发热', '发烧', '体温', '乏力', '疲劳', '没劲', '消瘦', '体重', '盗汗', '淋巴结', '寒战'],
    8: ['视力', '眼痛', '眼睛', '看不清', '耳鸣', '听力', '耳聋', '耳朵', '鼻出血', '流鼻血', '牙痛', '牙齿', '喉咙', '嗓子'],
    9: ['焦虑', '抑郁', '心情', '情绪', '烦躁', '紧张', '害怕', '想不开', '幻觉', '妄想', '精神', '心理', '压力']
}

# 疾病症状描述映射
DISEASE_SYMPTOM_DESCRIPTIONS = {
    0: '咳嗽、咳痰、呼吸困难、气促、咽痛等呼吸道症状',
    1: '胸闷、心悸、胸痛、高血压等心血管症状',
    2: '腹痛、腹泻、恶心、呕吐、胃痛等消化系统症状',
    3: '头痛、头晕、失眠、麻木、抽搐等神经系统症状',
    4: '关节疼痛、腰背痛、肌肉酸痛、活动受限等运动系统症状',
    5: '皮疹、瘙痒、红肿、脱皮等皮肤症状',
    6: '尿频、尿急、尿痛、血尿等泌尿系统症状',
    7: '发热、乏力、消瘦、盗汗等全身性症状',
    8: '视力模糊、耳鸣、鼻塞、牙痛等五官症状',
    9: '焦虑、抑郁、情绪低落、精神紧张等心理症状'
}

# 样本数据（疾病症状数据）
SAMPLE_DATA = [
    {
        "疾病名称": "呼吸系统感染",
        "主要症状": ["咳嗽", "咳痰", "呼吸困难", "发热"],
        "症状描述": "咳嗽咳痰呼吸困难发热",
        "症状类型": 0
    },
    {
        "疾病名称": "心血管疾病",
        "主要症状": ["胸闷", "胸痛", "心悸", "气短"],
        "症状描述": "胸闷胸痛心悸气短",
        "症状类型": 1
    },
    {
        "疾病名称": "消化系统疾病",
        "主要症状": ["腹痛", "腹泻", "恶心", "呕吐"],
        "症状描述": "腹痛腹泻恶心呕吐",
        "症状类型": 2
    },
    {
        "疾病名称": "神经系统疾病",
        "主要症状": ["头痛", "头晕", "失眠", "记忆力减退"],
        "症状描述": "头痛头晕失眠记忆力减退",
        "症状类型": 3
    },
    {
        "疾病名称": "肌肉骨骼疾病",
        "主要症状": ["关节疼痛", "腰背痛", "活动受限"],
        "症状描述": "关节疼痛腰背痛活动受限",
        "症状类型": 4
    }
]

# 诊断标准
DIAGNOSTIC_CRITERIA = {
    "呼吸系统疾病": "主要呼吸症状≥2项 + 相关检查异常",
    "心血管系统疾病": "主要心血管症状≥2项 + 心电图或影像学异常",
    "消化系统疾病": "主要消化症状≥2项 + 实验室检查异常",
    "神经系统疾病": "主要神经症状≥2项 + 神经系统检查异常",
    "肌肉骨骼疾病": "主要运动系统症状≥2项 + 影像学支持",
    "皮肤疾病": "典型皮肤表现 + 相关症状",
    "泌尿系统疾病": "泌尿系统症状≥2项 + 尿液检查异常",
    "全身性疾病": "全身症状≥2项 + 系统性检查异常",
    "五官疾病": "五官相关症状≥2项 + 专科检查异常",
    "精神心理疾病": "心理症状持续存在 + 心理评估异常"
}